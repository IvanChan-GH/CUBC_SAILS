<!--update.ejs-->
<form action="/present/update/<%= present.id %>" method="POST">

    <div class="form-group">
        <label>Present Name</label>
        <input type="text" class="form-control" name="Present[name]" value="<%= present.name %>" required>
    </div>

    <div class="form-group">
        <label>Size: </label>
        <label>small</label><input type="radio" value="small"  name="Present[size]" <%= present.size =='small'  ? "checked" : "" %>>
        <label>middle</label><input type="radio" value="middle" name="Present[size]" <%= present.size =='middle'  ? "checked" : "" %>>
        <label>large</label><input type="radio" value="large" name="Present[size]" <%= present.size =='large'  ? "checked" : "" %>>
    </div>

    <div class="form-group">
        <label>quantity</label>
        <input type="number" class="form-control" name="Present[quantity]" value="<%= present.quantity %>" required>
    </div>

    <div class="form-group">
        <label>price</label>
        <input type="number" class="form-control" name="Present[price]" value="<%= present.price %>" required>
    </div>

    <div class="form-group">
        <label>donator</label>
        <input type="text" class="form-control" name="Present[donator]" value="<%= present.donator %>" required>
    </div>

    <div class="form-group">
        <label>location</label>
        <input type="text" class="form-control" name="Present[location]" value="<%= present.location %>" required>
    </div>

    <div class="form-group">
        <label>remark</label>
        <textarea class="form-control" name="Present[remark]" ><%= present.remark %></textarea>
    </div>

    <div><label>Upload display photo: </label></div>
    <input type="file" accept="image/*"  onchange="handleFile(this.files)" />
    <div id="preview"></div>
    <br><br>

    <button type="submit" class="btn btn-primary">Submit</button>

    <script>
        function handleFile(files) {

            const file = files[0];
            if (!file.type.startsWith('image/')) return;

            var preview = document.getElementById('preview');

            var reader = new FileReader();
            reader.onload = function (e) {
                preview.innerHTML = "";

                var img = document.createElement('img');
                img.src = e.target.result;
                img.style = "max-width:33vw";
                preview.appendChild(img);

                var input = document.createElement('input');
                input.type = 'hidden';
                input.name = 'Present[avatar]';
                input.value = e.target.result;
                preview.appendChild(input);
            }
            reader.readAsDataURL(file);
        }
    </script>
</form>